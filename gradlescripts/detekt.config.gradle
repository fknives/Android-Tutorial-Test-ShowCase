
detekt {
    toolVersion = "$detekt_version"

    def projectPaths = subprojects.collect {
        def projectName = it.name
        if (it.subprojects.isEmpty()) {
            "$projectDir/$projectName/src/main/java"
        } else {
            it.subprojects.collect { sub ->
                "$sub.projectDir//src/main/java"
            }
        }
    }.flatten()

    source = files(*projectPaths)
    config = files("$projectDir/detekt/detekt.yml")
    baseline = file("$projectDir/detekt/baseline.xml")
    reports {
        txt {
            enabled = true
            destination = file("build/reports/detekt.txt")
        }
        html {
            enabled = true
            destination = file("build/reports/detekt.html")
        }
    }
}